<!-- ===== Sign Up Modal ===== -->
<div class="modal" id="signup-modal">
  <div class="modal-content">
    <span class="modal-close" onclick="closeModal('signup-modal')">&times;</span>
    <h2>Create Account</h2>
    <input type="text" id="signup-name" placeholder="Full Name" required>
    <input type="email" id="signup-email" placeholder="Email" required>
    <input type="password" id="signup-password" placeholder="Password" required>
    <input type="text" id="signup-phone" placeholder="Phone Number">
    <button id="signup-btn">Sign Up</button>
    <div class="feedback" id="signup-feedback"></div>
    <a href="#" onclick="openModal('signin-modal');closeModal('signup-modal')">Already have an account? Sign In</a>
  </div>
</div>

<script type="module">
import { auth } from './firebase-config.js';
import { createUserWithEmailAndPassword, updateProfile } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-auth.js";

const signupBtn = document.getElementById('signup-btn');
const feedback = document.getElementById('signup-feedback');

signupBtn.addEventListener('click', async () => {
  const name = document.getElementById('signup-name').value.trim();
  const email = document.getElementById('signup-email').value.trim();
  const password = document.getElementById('signup-password').value.trim();
  const phone = document.getElementById('signup-phone').value.trim();

  feedback.textContent = '';

  if(!name || !email || !password){
    feedback.style.color = 'red';
    feedback.textContent = '❌ Please fill all required fields';
    return;
  }

  try {
    const userCredential = await createUserWithEmailAndPassword(auth, email, password);
    await updateProfile(userCredential.user, { displayName: name, phoneNumber: phone });

    feedback.style.color = 'green';
    feedback.textContent = '✅ Account created successfully!';
    
    // Close modal after 1.5s
    setTimeout(()=>{ closeModal('signup-modal'); }, 1500);

  } catch(err) {
    feedback.style.color = 'red';
    feedback.textContent = '❌ ' + err.message;
  }
});

/* ===== Modal Helper Functions ===== */
function openModal(id){ document.getElementById(id).style.display='flex'; }
function closeModal(id){ document.getElementById(id).style.display='none'; }
</script>
