<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin - Add Stone</title>
<link rel="stylesheet" href="style.css">
</head>
<body>

<header>
  <h1>Admin Panel - Add Stone</h1>
</header>

<section>
  <form id="product-form">
    <input type="text" name="stone_name" placeholder="Stone Name" required>
    <input type="text" name="category" placeholder="Category (Bijoliya, Dholpur...)" required>
    <input type="text" name="sub_category" placeholder="Sub-category (Tile, Slab, etc.)" required>
    <input type="text" name="type" placeholder="Type (Farsi, Gitti, Poll)" required>
    <input type="text" name="color" placeholder="Color" required>
    <textarea name="description" placeholder="Stone Description" required></textarea>
    <input type="number" name="price" placeholder="Price" required>
    <input type="text" name="price_unit" placeholder="Price Unit (sqft, pcs, etc.)" required>
    <input type="text" name="contact_number" placeholder="Contact Number" required>
    <input type="url" name="whatsapp_link" placeholder="WhatsApp Link">
    <input type="text" name="factory_name" placeholder="Factory Name" required>
    <input type="url" name="image_url" placeholder="Image URL (from Firebase Storage)" required>
    <button type="submit">Add Product</button>
  </form>
</section>

<script type="module">
import { db, collection, addDoc } from './firebase-config.js';

const productForm = document.getElementById('product-form');

productForm.addEventListener('submit', async (e) => {
  e.preventDefault();

  try {
    await addDoc(collection(db, "products"), {
      stone_name: productForm.stone_name.value,
      category: productForm.category.value,
      sub_category: productForm.sub_category.value,
      type: productForm.type.value,
      color: productForm.color.value,
      description: productForm.description.value,
      price: parseFloat(productForm.price.value),
      price_unit: productForm.price_unit.value,
      contact_number: productForm.contact_number.value,
      whatsapp_link: productForm.whatsapp_link.value,
      factory_name: productForm.factory_name.value,
      image: productForm.image_url.value,
      created_at: new Date()
    });
    alert('Product uploaded successfully!');
    productForm.reset();
  } catch (err) {
    console.error(err);
    alert('Error uploading product');
  }
});
</script>
</body>
</html>
