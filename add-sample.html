<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Add Product - Rajasthan SandStone Hub</title>
<meta name="description" content="Add new sandstone product with image, category, and details.">
<style>
/* ===== Inbuilt CSS from index ===== */
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Segoe UI',Arial,sans-serif;background:#fafafa;color:#333;}
header{background:#c49a6c;color:#fff;text-align:center;padding:20px 10px;box-shadow:0 2px 5px rgba(0,0,0,0.15);}
header h1{font-size:1.8em;}
nav{background:#fff;display:flex;justify-content:center;flex-wrap:wrap;border-bottom:2px solid #e0e0e0;}
nav a{text-decoration:none;color:#333;padding:12px 16px;display:block;font-weight:600;transition:0.3s;}
nav a:hover{background:#c49a6c;color:#fff;}
section{max-width:700px;margin:30px auto;padding:20px;background:#fff;border-radius:10px;box-shadow:0 2px 8px rgba(0,0,0,0.1);}
footer{background:#333;color:#fff;text-align:center;padding:15px 5px;font-size:0.9em;margin-top:40px;}
input,textarea,select{width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:6px;}
button{background:#c49a6c;color:#fff;padding:10px 15px;border:none;border-radius:6px;cursor:pointer;font-weight:600;}
button:hover{background:#b5885a;}
.success{color:green;text-align:center;margin-top:10px;}
.error{color:red;text-align:center;margin-top:10px;}
</style>
</head>
<body>

<header>
  <h1>Rajasthan SandStone Hub</h1>
  <p>Add New Sandstone Product</p>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="products.html">Products</a>
  <a href="add-sample.html">Add Product</a>
  <a href="about.html">About</a>
  <a href="contact.html">Contact</a>
  <a href="privacy.html">Privacy Policy</a>
  <a href="terms.html">Terms</a>
</nav>

<section>
  <h2>Add New Product</h2>
  <form id="productForm">
    <label>Product Name:</label>
    <input type="text" id="name" required>

    <label>Description:</label>
    <textarea id="description" rows="3" required></textarea>

    <label>Category:</label>
    <input type="text" id="category" placeholder="e.g. Brown, Red, Pink" required>

    <label>Subcategory:</label>
    <input type="text" id="subcategory" placeholder="e.g. Polished, Raw" required>

    <label>Contact Info:</label>
    <input type="text" id="contact" placeholder="+91 XXXXX XXXXX" required>

    <label>Product Image:</label>
    <input type="file" id="image" accept="image/*" required>

    <button type="submit">Upload Product</button>
    <p id="message" class="success"></p>
  </form>
</section>

<footer>© 2025 Rajasthan SandStone Hub | Designed by RJ Services</footer>

<script type="module">
import { db, collection, addDoc, storage, ref, uploadBytes, getDownloadURL } from './firebase-config.js';

const form = document.getElementById("productForm");
form.addEventListener("submit", async (e) => {
  e.preventDefault();
  const name = document.getElementById("name").value;
  const description = document.getElementById("description").value;
  const category = document.getElementById("category").value;
  const subcategory = document.getElementById("subcategory").value;
  const contact = document.getElementById("contact").value;
  const imageFile = document.getElementById("image").files[0];
  const message = document.getElementById("message");

  try {
    // Upload image to Firebase Storage
    const imageRef = ref(storage, `sandstones/${imageFile.name}`);
    await uploadBytes(imageRef, imageFile);
    const imageUrl = await getDownloadURL(imageRef);

    // Save details to Firestore
    await addDoc(collection(db, "sandstone_products"), {
      name, description, category, subcategory, contact, imageUrl, date: new Date().toISOString()
    });

    message.textContent = "✅ Product added successfully!";
    form.reset();
  } catch (error) {
    message.textContent = "❌ Error adding product: " + error.message;
    message.className = "error";
  }
});
</script>
</body>
</html>
