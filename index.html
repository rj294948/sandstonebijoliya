<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rajasthan SandStone Hub - Bijoliya & Rajasthan Natural Stones</title>
<meta name="description" content="Explore Rajasthan’s best sandstone varieties from Bijoliya and nearby regions. Connect directly with verified suppliers and factories.">
<style>
/* ===== Reset & Basics ===== */
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Segoe UI',Arial,sans-serif;background:#fafafa;color:#333;}

/* ===== Header ===== */
header{
  background:#c49a6c;
  color:#fff;
  text-align:center;
  padding:20px 10px;
  box-shadow:0 2px 5px rgba(0,0,0,0.15);
}
header h1{font-size:1.8em;}
header p{font-size:0.9em;margin-top:5px;}

/* ===== Navbar ===== */
nav{
  background:#fff;
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  border-bottom:2px solid #e0e0e0;
}
nav a{
  text-decoration:none;
  color:#333;
  padding:12px 16px;
  display:block;
  font-weight:600;
  transition:0.3s;
}
nav a:hover{background:#c49a6c;color:#fff;}

/* ===== Hero Section ===== */
.hero{
  background:url('https://images.unsplash.com/photo-1581091870623-8c6b3d14f4b5?auto=format&fit=crop&w=1400&q=70') no-repeat center/cover;
  height:280px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  color:#fff;
  text-shadow:1px 1px 3px rgba(0,0,0,0.6);
  font-size:1.6em;
  text-align:center;
  padding:10px;
}
.hero button{
  margin-top:15px;
  padding:10px 20px;
  background:#fff;
  color:#c49a6c;
  border:none;
  border-radius:8px;
  font-size:1em;
  cursor:pointer;
  font-weight:600;
}
.hero button:hover{
  background:#c49a6c;
  color:#fff;
}

/* ===== Section General ===== */
section{
  max-width:1100px;
  margin:40px auto;
  padding:20px;
  background:#fff;
  border-radius:10px;
  box-shadow:0 2px 8px rgba(0,0,0,0.1);
}

/* ===== Categories ===== */
.categories{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:20px;
  margin-top:20px;
}
.category{
  background:#fff;
  border:1px solid #ddd;
  border-radius:10px;
  overflow:hidden;
  text-align:center;
  transition:transform 0.3s, box-shadow 0.3s;
}
.category:hover{
  transform:translateY(-5px);
  box-shadow:0 4px 12px rgba(0,0,0,0.15);
}
.category img{
  width:100%;
  height:140px;
  object-fit:cover;
}
.category h3{
  color:#c49a6c;
  padding:10px 0;
}

/* ===== Add Product Form ===== */
#productForm{
  display:none;
  margin-top:30px;
}
#productForm input, #productForm textarea, #productForm select{
  width:100%;
  margin:8px 0;
  padding:10px;
  border:1px solid #ccc;
  border-radius:6px;
}
#productForm button{
  background:#c49a6c;
  color:white;
  border:none;
  padding:10px 20px;
  border-radius:6px;
  cursor:pointer;
}
#productForm button:hover{background:#a67b5b;}

/* ===== Footer ===== */
footer{
  background:#333;
  color:#fff;
  text-align:center;
  padding:15px 5px;
  font-size:0.9em;
  margin-top:40px;
}
</style>
</head>
<body>

<header>
  <h1>Rajasthan SandStone Hub</h1>
  <p>Your Trusted Source for Bijoliya & Rajasthan Sandstone</p>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="products.html">Products</a>
  <a href="add-sample.html">Add Sample</a>
  <a href="about.html">About</a>
  <a href="contact.html">Contact</a>
  <a href="privacy.html">Privacy Policy</a>
  <a href="terms.html">Terms</a>
</nav>

<div class="hero">
  Rajasthan’s Finest Sandstone Collection
  <button onclick="document.getElementById('productForm').scrollIntoView({behavior:'smooth'})">Add Your Product</button>
</div>

<section>
  <h2>Explore Sandstone Categories</h2>
  <p>Discover various sandstone types from verified suppliers. Click a category to view detailed products.</p>
  
  <div class="categories" id="categoryContainer">
    <!-- Firebase categories will appear here dynamically -->
  </div>
</section>

<section id="productForm">
  <h2>Add Your Product</h2>
  <p>Companies can submit their product details below. Admin will verify and publish them.</p>
  
  <form id="sendForm">
    <input type="text" id="company" placeholder="Company Name" required>
    <input type="text" id="productName" placeholder="Product Name" required>
    <select id="category">
      <option value="">Select Category</option>
      <option value="Brown">Brown Sandstone</option>
      <option value="Red">Red Sandstone</option>
      <option value="Pink">Pink Sandstone</option>
      <option value="Blue">Blue Sandstone</option>
      <option value="Others">Others</option>
    </select>
    <textarea id="description" placeholder="Product Description" required></textarea>
    <input type="file" id="image" accept="image/*" required>
    <input type="tel" id="phone" placeholder="Contact Number" required>
    <button type="submit">Send to Admin</button>
    <p id="msg"></p>
  </form>
</section>

<footer>
  © 2025 Rajasthan SandStone Hub | Designed by RJ Services
</footer>

<!-- ===== Firebase & Script ===== -->
<script type="module">
import { db, storage, collection, addDoc, getDocs, ref, uploadBytes, getDownloadURL } from './firebase-config.js';

const msg = document.getElementById('msg');
const catContainer = document.getElementById('categoryContainer');

// ===== Fetch Categories Automatically from Firebase =====
async function loadCategories() {
  const querySnap = await getDocs(collection(db, "sandstoneSamples"));
  const cats = {};
  querySnap.forEach(doc => {
    const data = doc.data();
    if(!cats[data.type]) cats[data.type] = data.imageURL;
  });

  catContainer.innerHTML = Object.keys(cats).map(cat => `
    <div class="category" onclick="window.location='products.html?cat=${cat}'">
      <img src="${cats[cat]}" alt="${cat}">
      <h3>${cat}</h3>
    </div>
  `).join('');
}
loadCategories();

// ===== Send Product Request (Email + WhatsApp Notify) =====
document.getElementById("sendForm").addEventListener("submit", async (e)=>{
  e.preventDefault();
  const file=document.getElementById("image").files[0];
  const refPath=ref(storage,`requests/${Date.now()}_${file.name}`);
  msg.textContent="Uploading...";
  await uploadBytes(refPath,file);
  const imageURL=await getDownloadURL(refPath);

  // Firebase me store karo
  await addDoc(collection(db,"productRequests"),{
    company:company.value,
    name:productName.value,
    category:category.value,
    description:description.value,
    phone:phone.value,
    imageURL,
    createdAt:new Date().toISOString()
  });

  // WhatsApp + Email link
  const text = `New Product Request:%0ACompany: ${company.value}%0AProduct: ${productName.value}%0ACategory: ${category.value}%0ADescription: ${description.value}%0AContact: ${phone.value}`;
  const waURL = `https://wa.me/917737740207?text=${text}`;
  const mailURL = `mailto:ravijain236129@gmail.com?subject=New Product Request&body=${decodeURIComponent(text)}%0AImage: ${imageURL}`;

  msg.innerHTML = `✅ Sent Successfully! <br>
  <a href="${waURL}" target="_blank">Send via WhatsApp</a> |
  <a href="${mailURL}" target="_blank">Send via Email</a>`;
});
</script>

</body>
</html>
