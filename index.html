<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rajasthan SandStone Hub - Bijoliya & Rajasthan Natural Stones</title>
<meta name="description" content="Explore Rajasthan‚Äôs best sandstone varieties from Bijoliya and nearby regions. Connect directly with verified suppliers and factories.">

<style>
/* ===== Reset & Basics ===== */
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'Segoe UI',Arial,sans-serif;background:#fafafa;color:#333;}

/* ===== Header ===== */
header{
  background:#c49a6c;
  color:#fff;
  text-align:center;
  padding:20px 10px;
  box-shadow:0 2px 5px rgba(0,0,0,0.15);
}
header h1{font-size:1.8em;}
header p{font-size:0.9em;margin-top:5px;}

/* ===== Navbar ===== */
nav{
  background:#fff;
  display:flex;
  justify-content:center;
  flex-wrap:wrap;
  border-bottom:2px solid #e0e0e0;
}
nav a{
  text-decoration:none;
  color:#333;
  padding:12px 16px;
  display:block;
  font-weight:600;
  transition:0.3s;
}
nav a:hover{background:#c49a6c;color:#fff;}

/* ===== Hero Section ===== */
.hero{
  background:url('https://images.unsplash.com/photo-1581091870623-8c6b3d14f4b5?auto=format&fit=crop&w=1400&q=70') no-repeat center/cover;
  height:300px;
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
  text-shadow:1px 1px 3px rgba(0,0,0,0.6);
  font-size:1.8em;
  text-align:center;
  padding:10px;
}

/* ===== Section General ===== */
section{
  max-width:1100px;
  margin:40px auto;
  padding:20px;
  background:#fff;
  border-radius:10px;
  box-shadow:0 2px 8px rgba(0,0,0,0.1);
}

/* ===== Product Grid ===== */
.products{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(240px,1fr));
  gap:20px;
  margin-top:20px;
}
.product{
  background:#fff;
  border:1px solid #ddd;
  border-radius:10px;
  overflow:hidden;
  transition:transform 0.3s, box-shadow 0.3s;
}
.product:hover{
  transform:translateY(-5px);
  box-shadow:0 4px 12px rgba(0,0,0,0.15);
}
.product img{
  width:100%;
  height:180px;
  object-fit:cover;
}
.product .info{
  padding:10px 15px;
}
.product .info h3{
  color:#c49a6c;
  margin-bottom:8px;
}
.product .info p{
  font-size:0.9em;
  color:#555;
}

/* ===== Admin Form ===== */
#adminForm{
  max-width:500px;
  margin:40px auto;
  background:#fff;
  padding:20px;
  border-radius:10px;
  box-shadow:0 2px 8px rgba(0,0,0,0.1);
}
#adminForm input, #adminForm textarea, #adminForm select{
  width:100%;
  padding:10px;
  margin:10px 0;
  border:1px solid #ccc;
  border-radius:6px;
}
#adminForm button{
  background:#c49a6c;
  color:#fff;
  padding:10px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
#adminForm button:hover{
  background:#b35f4a;
}

/* ===== Footer ===== */
footer{
  background:#333;
  color:#fff;
  text-align:center;
  padding:15px 5px;
  font-size:0.9em;
  margin-top:40px;
}

/* ===== Responsive ===== */
@media(max-width:700px){
  nav a{padding:10px;font-size:0.9em;}
  .hero{font-size:1.3em;height:200px;}
}
</style>
</head>
<body>

<header>
  <h1>Rajasthan SandStone Hub</h1>
  <p>Your Trusted Source for Bijoliya & Rajasthan Natural Stones</p>
</header>

<nav>
  <a href="index.html">Home</a>
  <a href="#products">Products</a>
  <a href="#adminForm">Add Product</a>
  <a href="about.html">About</a>
  <a href="contact.html">Contact</a>
  <a href="privacy.html">Privacy</a>
  <a href="terms.html">Terms</a>
</nav>

<div class="hero">
  Rajasthan‚Äôs Finest Stone Collection
</div>

<section id="products">
  <h2>Explore Our Stone Categories</h2>
  <p>Browse premium stones from Bijoliya and across Rajasthan ‚Äî including Sandstone, Marble, Granite, Kota Stone, and more.</p>
  <div id="categoryContainer" class="products"></div>
</section>

<!-- ===== Admin Product Add Form ===== -->
<section id="adminForm">
  <h2>Add New Product</h2>
  <form id="productForm">
    <input type="text" id="name" placeholder="Stone Name" required>
    <input type="text" id="factory" placeholder="Factory Name" required>
    <input type="text" id="mainCategory" placeholder="Main Category (e.g. Sandstone, Marble)" required>
    <input type="text" id="subCategory" placeholder="Sub Category (e.g. Brown, Red, White)" required>
    <input type="number" id="price" placeholder="Price ‚Çπ" required>
    <input type="text" id="contact" placeholder="Contact Number" required>
    <textarea id="description" placeholder="Description"></textarea>
    <input type="file" id="imageFile" accept="image/*" required>
    <button type="submit">Add Product</button>
    <p id="msg"></p>
  </form>
</section>

<footer>
  ¬© 2025 Rajasthan SandStone Hub | Designed by RJ Services
</footer>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-app.js";
  import { getFirestore, collection, addDoc, getDocs, doc } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-firestore.js";
  import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/12.5.0/firebase-storage.js";

  const firebaseConfig = {
    apiKey: "AIzaSyDIXyjs57ztJDN6_4-JIIyZpK3BtacVtMw",
    authDomain: "automobilix-2af84.firebaseapp.com",
    projectId: "automobilix-2af84",
    storageBucket: "automobilix-2af84.appspot.com",
    messagingSenderId: "536651887423",
    appId: "1:536651887423:web:4f5065327e7cb155fa198a",
    measurementId: "G-EKFWGHZHQ7"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  const storage = getStorage(app);
  const msg = document.getElementById("msg");

  // ===== Load Products Category-wise =====
  async function loadProducts() {
    const container = document.getElementById("categoryContainer");
    container.innerHTML = "";

    const categoriesSnap = await getDocs(collection(db, "stones"));
    for (const cat of categoriesSnap.docs) {
      const catDiv = document.createElement("div");
      catDiv.innerHTML = `<h2 style="margin-top:20px;color:#c49a6c;">${cat.id}</h2>`;
      container.appendChild(catDiv);

      const subSnap = await getDocs(collection(db, `stones/${cat.id}/subcategories`));
      for (const sub of subSnap.docs) {
        const subDiv = document.createElement("div");
        subDiv.innerHTML = `<h3 style="margin:10px 0;">${sub.id}</h3>`;
        container.appendChild(subDiv);

        const productsSnap = await getDocs(collection(db, `stones/${cat.id}/subcategories/${sub.id}/products`));
        const grid = document.createElement("div");
        grid.className = "products";
        productsSnap.forEach(p => {
          const d = p.data();
          const div = document.createElement("div");
          div.className = "product";
          div.innerHTML = `
            <img src="${d.imageURL}" alt="${d.name}">
            <div class="info">
              <h3>${d.name}</h3>
              <p>${d.description}</p>
              <p><b>‚Çπ${d.price}</b> | ${d.factory}</p>
              <p>üìû ${d.contact}</p>
            </div>
          `;
          grid.appendChild(div);
        });
        container.appendChild(grid);
      }
    }
  }

  loadProducts();

  // ===== Admin Form Submit =====
  document.getElementById("productForm").addEventListener("submit", async e => {
    e.preventDefault();
    msg.textContent = "‚è≥ Uploading...";

    const name = document.getElementById("name").value;
    const factory = document.getElementById("factory").value;
    const mainCategory = document.getElementById("mainCategory").value.trim();
    const subCategory = document.getElementById("subCategory").value.trim();
    const price = document.getElementById("price").value;
    const contact = document.getElementById("contact").value;
    const description = document.getElementById("description").value;
    const image = document.getElementById("imageFile").files[0];

    try {
      const imageRef = ref(storage, `stoneImages/${Date.now()}_${image.name}`);
      await uploadBytes(imageRef, image);
      const url = await getDownloadURL(imageRef);

      const subRef = doc(db, `stones/${mainCategory}/subcategories/${subCategory}`);
      await addDoc(collection(subRef, "products"), {
        name, factory, price, contact, description, imageURL: url, createdAt: new Date().toISOString()
      });

      msg.textContent = "‚úÖ Product added successfully!";
      e.target.reset();
      loadProducts();
    } catch (err) {
      msg.textContent = "‚ùå " + err.message;
    }
  });
</script>

</body>
</html>
